<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" version="29.3.4">
  <diagram name="第 1 页" id="O2ROCtE2RukvbL0ybH2U">
    <mxGraphModel dx="815" dy="425" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-74" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="recall-job&#xa;RegionPosBlacklistCacheManager" vertex="1">
          <mxGeometry height="1932" width="240" x="220" y="20" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-75" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="common-redis&#xa;Redis" vertex="1">
          <mxGeometry height="1932" width="150" x="757" y="20" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-76" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="recall-job&#xa;RegionPosBlackListProcessor" vertex="1">
          <mxGeometry height="1932" width="183" x="940" y="20" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-77" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="recall-redis&#xa;Redis" vertex="1">
          <mxGeometry height="1932" width="150" x="1157" y="20" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-79" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="recall-service&#xa;RegionPosFilter" vertex="1">
          <mxGeometry height="1932" width="150" x="1738" y="20" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-80" parent="1" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=40" value="loop" vertex="1">
          <mxGeometry height="204" width="514" x="329" y="350" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-81" parent="Lt1LlJFp-fGM24B6cQKX-80" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" value="[遍历每个groupId]" vertex="1">
          <mxGeometry height="20" width="474" x="40" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-82" parent="1" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=0" value="" vertex="1">
          <mxGeometry height="991" width="1207" x="60" y="95" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-83" parent="Lt1LlJFp-fGM24B6cQKX-82" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" value="" vertex="1">
          <mxGeometry height="20" width="1207" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-84" parent="1" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=0" value="" vertex="1">
          <mxGeometry height="761" width="679" x="1221" y="1096" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-85" parent="Lt1LlJFp-fGM24B6cQKX-84" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" value="" vertex="1">
          <mxGeometry height="20" width="679" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-88" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-74" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="Lt1LlJFp-fGM24B6cQKX-75" value="SCAN扫描黑名单key&#xa;PATTERN: ad:show:recall:region:pos:blacklist:*">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="595" y="278" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-89" parent="Lt1LlJFp-fGM24B6cQKX-88" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="2" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-253.5" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-90" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-75" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="Lt1LlJFp-fGM24B6cQKX-74" value="返回所有匹配的key列表">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="598" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-91" parent="Lt1LlJFp-fGM24B6cQKX-90" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="3" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="239.5" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-92" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-74" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="Lt1LlJFp-fGM24B6cQKX-75" value="读取黑名单数据&#xa;SMEMBERS ad:show:recall:region:pos:blacklist:{groupId}">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="595" y="461" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-93" parent="Lt1LlJFp-fGM24B6cQKX-92" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="4" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-253.5" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-94" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-75" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="Lt1LlJFp-fGM24B6cQKX-74" value="返回黑名单数据 regions pos">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="598" y="534" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-95" parent="Lt1LlJFp-fGM24B6cQKX-94" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="5" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="239.5" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-110" edge="1" parent="1" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" value="返回数据&#xa;包含blockRegionPos字段">
          <mxGeometry relative="1" x="0.1991" y="9" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="1696.75" y="1331" />
              <mxPoint x="1669.93" y="1320" />
            </Array>
            <mxPoint x="1220" y="1331" as="sourcePoint" />
            <mxPoint x="1813.43" y="1320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-111" parent="Lt1LlJFp-fGM24B6cQKX-110" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="12" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-297" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-114" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-79" style="curved=1;endArrow=block;rounded=0;" target="Lt1LlJFp-fGM24B6cQKX-79" value="拼接region#pos">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1864" y="1449" />
              <mxPoint x="1864" y="1479" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-115" parent="Lt1LlJFp-fGM24B6cQKX-114" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="15" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-116" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-79" style="curved=1;endArrow=block;rounded=0;" target="Lt1LlJFp-fGM24B6cQKX-79" value="检查blockRegionPos&#xa;是否包含当前region#pos">
          <mxGeometry relative="1" x="0.005" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="1864" y="1561" />
              <mxPoint x="1864" y="1591" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-117" parent="Lt1LlJFp-fGM24B6cQKX-116" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="16" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-118" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-79" style="curved=1;endArrow=block;rounded=0;" target="Lt1LlJFp-fGM24B6cQKX-79" value="过滤/保留广告">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1864" y="1643" />
              <mxPoint x="1864" y="1673" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-119" parent="Lt1LlJFp-fGM24B6cQKX-118" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="17" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-120" edge="1" parent="1" source="Lt1LlJFp-fGM24B6cQKX-79" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" value="返回过滤结果">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1687" y="1725" />
            </Array>
            <mxPoint x="1536.810344827586" y="1725" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-121" parent="Lt1LlJFp-fGM24B6cQKX-120" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="18" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="131.5" y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-122" edge="1" parent="1" style="curved=1;dashed=1;dashPattern=2 3;endArrow=block;rounded=0;" value="返回最终广告列表">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1588" y="1777" />
              <mxPoint x="1588" y="1807" />
            </Array>
            <mxPoint x="1536.810344827586" y="1777" as="sourcePoint" />
            <mxPoint x="1536.810344827586" y="1807" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-123" parent="Lt1LlJFp-fGM24B6cQKX-122" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="19" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-124" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="阶段1: 定时任务加载与打标" vertex="1">
          <mxGeometry height="49" width="1017" x="240" y="115" as="geometry" />
        </mxCell>
        <mxCell id="Lt1LlJFp-fGM24B6cQKX-125" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="阶段2: 实时请求过滤" vertex="1">
          <mxGeometry height="49" width="618" x="1220" y="1116" as="geometry" />
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-31" edge="1" parent="1" style="curved=1;endArrow=block;rounded=0;" value="处理黑名单数据 字符串拼接region#pos&#xa;转换为Set&lt;String&gt;格式">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="401" y="590" />
              <mxPoint x="401" y="620" />
            </Array>
            <mxPoint x="350" y="590" as="sourcePoint" />
            <mxPoint x="350" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-32" parent="RtCMQcYR-EeQIVRJjDdb-31" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="8" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-33" edge="1" parent="1" style="curved=1;endArrow=block;rounded=0;" value="设置缓存&#xa;Map&lt;groupId, Set&lt;region#pos&gt;">
          <mxGeometry relative="1" x="0.0075" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="401" y="702" />
              <mxPoint x="401" y="732" />
            </Array>
            <mxPoint x="350" y="702" as="sourcePoint" />
            <mxPoint x="350" y="732" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-34" parent="RtCMQcYR-EeQIVRJjDdb-33" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="9" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-35" edge="1" parent="1" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" value="获取广告组的广告位黑名单信息">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="805" y="780" />
            </Array>
            <mxPoint x="350" y="780" as="sourcePoint" />
            <mxPoint x="1030" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-43" edge="1" parent="1" style="curved=1;endArrow=block;rounded=0;" value="给Ad达标&#xa;Set&lt;String&gt; blockRegionPos">
          <mxGeometry relative="1" x="0.0075" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="1081" y="820" />
              <mxPoint x="1081" y="850" />
            </Array>
            <mxPoint x="1030" y="820" as="sourcePoint" />
            <mxPoint x="1030" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-44" parent="RtCMQcYR-EeQIVRJjDdb-43" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="10" vertex="1">
          <mxGeometry height="14" relative="1" width="14" as="geometry">
            <mxPoint x="-57" y="-22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-45" edge="1" parent="1" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" value="写入广告">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1032" y="930" />
            </Array>
            <mxPoint x="1057" y="930" as="sourcePoint" />
            <mxPoint x="1257" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtCMQcYR-EeQIVRJjDdb-46" parent="1" style="ellipse;aspect=fixed;fillColor=#000000;align=center;fontColor=#FFFFFF;" value="11" vertex="1">
          <mxGeometry height="14" width="14" x="1020" y="920" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
